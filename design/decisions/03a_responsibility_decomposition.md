### **Декомпозиция ответственности и слоёв архитектуры**

## **Назначение**

Зафиксировать структуру ответственности внутри проекта через декомпозицию по слоям, выявить зоны слабой связности и сценарий дальнейшего расширения. Подчеркнуть целостность проектирования, реализации и верификации в рамках учебного проектирования принципов DI.

---

## **Общая слоистая структура**

В системе выделяются **три верхнеуровневых слоя**, каждый из которых несёт свою роль:

---

### **1. Слой проектирования системы**

Отвечает за осмысление, проектирование и фиксацию решений.

- `design/analysis/` — процесс выделения требований проектирования. Содержит итерации мышления и промежуточные размышления.
- `design/decisions/` — итоговые артефакты проектирования (по шагам методологии).

---

### **2. Слой автоматизации верификации требований проектирования**

Представлен юнит-тестами:

- Каждый тест — верификатор корректности реализации в соответствии с проектным артефактом;
- Используются xUnit и покрываются все ключевые классы и сценарии;
- Покрытие рассматривается как необходимый минимум для инженерной дисциплины, а не как самоцель.

---

### **3. Слой реализации требований проектирования**

Содержит реализацию DI-архитектуры и сценария исполнения. Внутри слоя выделены следующие подслои:

#### 3.1 Сценарий выполнения
- `Program.cs`, точка входа, взаимодействует с пользователем.

#### 3.2 Абстрактный контракт
- Интерфейс `IMessenger`, представляет поведение, зависящее от реализации.

#### 3.3 Конкретные реализации контракта
- Реализация интерфейса `IMessenger`, например, `ConsoleMessenger`, `StubMessenger`, `FileMessenger`, `SecureMessenger`.
- **Точка слабой связности**: реализация выбирается через DI, позволяя замену без изменения зависимых компонентов.

#### 3.4 Сущность с зависимостями
- Класс `MessageSender`, принимает `IMessenger` и инкапсулирует бизнес-логику "отправки".
- **SRP и Inversion of Control**: реализация отправки и логика генерации сообщения разведены.
- Выделение `MessageSender` создаёт точку масштабирования для других видов сообщающих (например, логгера или агрегатора сообщений).

---

## **Сценарий расширения проекта**

Расширение предполагает строгое следование инженерной дисциплине и проходит через цепочку:

1. Добавление этапа проектирования →  
2. Создание артефакта проектного шага в `design/decisions/` →  
3. Создание юнит-теста, проверяющего новый элемент →  
4. Реализация нового исполнителя контракта или изменения существующей реализации.

---

## **Мотивация**

Такое разделение обеспечивает:

- **Прозрачность и масштабируемость** — каждый шаг отделим и может быть переиспользован.
- **Осознанность архитектурных решений** — в коде нет "магии", все компоненты объяснены.
- **Основу под качественное сопровождение** — даже для учебного проекта соблюдены инженерные принципы.
