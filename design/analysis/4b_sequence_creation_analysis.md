# 4_c. Аналитика процесса создания Sequence Diagram

## Визуализация

Схема процесса создания и тестирования нового Sender доступна в виде диаграммы:

- [PlantUML код диаграммы](../decisions/diagrams/sequence_creation_diagram.md)
- ![Sequence Diagram](../decisions/diagrams/sequence_creation_diagram.png)


## Цель документа
Зафиксировать процесс обсуждения, принятые проектные решения, возникавшие вопросы и рассуждения при создании sequence-диаграммы для проекта ConsoleAppDI.  
Документ предназначен для **анализа проектной и инженерной логики**, а также для понимания динамики принятия решений при моделировании архитектуры.

---

## Общий контекст
- Проект ConsoleAppDI использует **инверсию зависимостей (DI)** и **TDD**.  
- Основная цель диаграммы — визуализировать **порядок взаимодействия слоёв и участников**, включая разработчика, аналитика и документацию.  
- Диаграмма должна демонстрировать **динамику процесса**, а не статическую структуру классов или интерфейсов.

---

## Хронология аналитических обсуждений

1. **Определение процесса для диаграммы**  
   - Сначала обсуждался вопрос, какой процесс отображать: весь жизненный цикл проекта или только отдельный функциональный сценарий.  
   - Принято решение отразить процесс **создания нового Sender**, чтобы показать TDD + DI + документацию.

2. **Выбор участников (participants / actors)**  
   - Обсуждалось, кого включать: слои, разработчик, аналитик.  
   - Выбрано:
     - Actor: Analyst, Developer  
     - Participant: Design / Documentation, Test Layer, Abstraction Layer, Executor Layer, Coordinator Layer, Composition Root / Entry Layer

3. **Смысл и уровень детализации**
   - Подчёркивалось, что диаграмма должна **отражать логику архитектуры и DI**, а не технические детали реализации.  
   - Обсуждалось, что **тесты проверяют только Executor и абстракцию**, Coordinator проверять не нужно, так как DI гарантирует его корректное связывание.

4. **Порядок сообщений**
   - Решено строить диаграмму с **акцентом на документы и тесты**:  
     1. Документация → Developer  
     2. Developer → Documentation (проект) → Analyst → Documentation → Developer  
     3. Developer → Test Layer (создание тестов)  
     4. TDD-цикл с Executor и Abstraction  
     5. DI через Composition Root  
     6. Финальная интеграция и фиксация документации

5. **Решения по активации участников**
   - Рассматривалось использование `activate` / `deactivate`.  
   - Принято решение **Developer активен почти всю жизнь**, поэтому повторная активация не нужна.  
   - Тестовый слой, Executor, Abstraction, Composition Root, Coordinator активируются только на время своих операций.

6. **Ответы и подтверждения**
   - Первоначально обсуждались многочисленные подтверждения для каждой стрелки.  
   - Решено упростить восприятие: подтверждения добавлены только там, где это важно, и исключены для обновления реализации и DI-связывания.

7. **Цикл TDD**
   - Диаграмма отражает **итеративную проверку** Executor через тесты и контракт IMessenger.  
   - Developer получает отчёт о несоответствиях и корректирует реализацию до прохождения тестов.

8. **DI через Composition Root**
   - Отражается как отдельный шаг с явной настройкой DI и инъекцией зависимостей в Coordinator.  
   - Подчёркивается принцип инверсии зависимостей.

9. **Финальная валидация и фиксация**
   - После интеграции через Composition Root запускается интеграционный тест.  
   - Developer фиксирует реализацию, Documentation Layer передаёт финальный документ Analyst.

---

## Принятые проектные решения
- Диаграмма ориентирована на **динамику процессов**, а не на классы или методы.  
- TDD и DI отражены как **ключевые архитектурные принципы**.  
- Документация выступает в роли источника истины для требований и фиксации результата.  
- Циклы, активации и подтверждения упрощены для **чистого восприятия**.  

---

## Выводы и аналитика
- Создание диаграммы позволило выявить **чёткую последовательность взаимодействия слоёв** и роли участников.  
- Аналитический процесс показал необходимость **баланса между детализацией и наглядностью**.  
- Отдельное внимание уделено **инверсии зависимостей через Composition Root**, что является ключевой архитектурной концепцией проекта.  
- Документация, TDD и DI взаимосвязаны, и их совместное отображение помогает понять **архитектурный поток от требований до фиксации реализации**.  
- В результате создан **структурированный и легко читаемый материал**, который может быть использован как **основа для презентаций, обучения или дальнейшей проектной документации**.

