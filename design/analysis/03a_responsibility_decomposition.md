# 03a\_responsibility\_decomposition\_iterations.md

# Анализ эволюции декомпозиции ответственности (Шаг 3)

Данный документ фиксирует процесс формирования и уточнения декомпозиции ответственности проекта.

Связанные этапы и артефакты:

* Методология инженерного процесса: [`00a_engineering_steps.md`](../decisions/00a_engineering_steps.md)
* Итерации цели проекта: [`01a_goal_iterations.md`](../analysis/01a_goal_iterations.md)
* Структура требований: [`02a_requirements_structure.md`](../decisions/02a_requirements_structure.md)
* Итерации функциональных требований: [`02a_functional_requirements_iterations.md`](../analysis/02a_functional_requirements_iterations.md)
* Итерации нефункциональных требований: [`02a_nonfunctional_requirements_iterations.md`](../analysis/02a_nonfunctional_requirements_iterations.md)
* Итерации тестируемости: [`02c_testability_iterations.md`](../analysis/02c_testability_iterations.md)

---

## 1. Первоначальная попытка

В самом начале декомпозиция ответственности была сведена к простому списку:

* Документация
* Реализация
* Тесты

**Недостатки:**

* Отсутствовала детализация ролей в каждом блоке.
* Нечётко прописаны границы и взаимодействия между ними.
* Реализация воспринималась как монолит без внутренних слоёв.

---

## 2. Уточнение структуры реализации

После первой попытки было принято решение разбить «Реализацию» на три части:

1. Точка входа (Program.cs)
2. Интерфейсы (контракты DI)
3. Классы-реализации

**Что улучшилось:**

* Появилось понимание, что различные аспекты кода должны быть выделены.
* Стала нагляднее точка инверсии управления.

**Остались провисания:**

* Роль «MessageSender» (приёмник DI) не была выделена.
* Взаимодействие блоков все ещё не описано.

---

## 3. Переход к трёхслойной модели

На основе обсуждений пришли к трёхслойной архитектуре:

1. Слой проектирования (документация) — анализ vs решения
2. Слой тестирования — верификация требований
3. Слой реализации — четыре подслоя

**Плюсы:**

* Чёткое разделение ответственности на уровне процесса.
* Документация и тесты стали полноценными слоями, а не вспомогательными элементами.

**Осталось:**

* Явно прописать взаимодействие между слоями.
* Уточнить понятийную форму «сущности с зависимостями».

---

## 4. Финальная декомпозиция

По итогу декомпозиция ответственности обрела следующий вид:

* **Слой проектирования**: анализ и артефакты (двуслойный внутри)
* **Слой верификации**: тесты как верификаторы DI-контрактов
* **Слой реализации**:

  1. Сценарий выполнения (Program)
  2. Абстрактные контракты (IMessenger)
  3. Конкретные реализации
  4. Сущность-приёмник DI (MessageSender)

**Почему это оптимально:**

* Баланс детализации и наглядности
* Соответствует SRP и слабой связности
* Поддерживает сценарий расширения и TDD
